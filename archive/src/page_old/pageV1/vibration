Vibration and Proximity</br>
<input type="file" accept="video/*;capture=camcorder">
<input type="file" accept="audio/*;capture=microphone">
<div id="divJauge">
  <input type="range" min="0" max="1000" value="0" class="slider" id="rangeJauge">
</div>

<script>
	
 // var seuilAtteind = true;
  var energieCumul = 0;
  var tolerance = 9+9+1;
  var seuilEnergie = 1000;
 
 if(window.DeviceOrientationEvent){
    window.addEventListener("deviceorientation", orientation, false);
      console.log("DeviceOrientationEvent is supported");
  }else{
    console.log("DeviceOrientationEvent is not supported");
  }
  document.body.style.backgroundColor = "#AA0000";  


  window.ondevicemotion = function(event) {


    if(energieCumul >= seuilEnergie){
      seuilAtteind = true;
      accelerOff();
      document.body.style.backgroundColor = "#00AA14";
    }

    var x = event.accelerationIncludingGravity.x; 
    document.getElementById("valueX").value = "X= " + x ;
    document.getElementById("rangeX").value = x;
   
    //son avec orientation
    

    
    var y = event.accelerationIncludingGravity.y;  
    document.getElementById("valueY").value = "Y= " + x ;
    document.getElementById("rangeY").value = y;


    var z = event.accelerationIncludingGravity.z; 
    document.getElementById("valueZ").value = "Z= " + x ;
    document.getElementById("rangeZ").value = z;


    if (x+y+z>tolerance){
      energieCumul += x+y+z;
      document.getElementById("rangeJauge").value = energieCumul;
    }
  }

    //  window.navigator.vibrate(1000);




  //while(seuilAtteind){
    //  window.navigator.vibrate(1000);

  //}


//la proximit√© ne semble pas marcher sur ce telephone...
window.addEventListener('userproximity', function(event) {
  if (event.near) {
    // let's power off the screen
    console.log("let's power off the screen");
   // navigator.mozPower.screenEnabled = false;
  } else {
 	console.log("//Otherwise, let's power on the screen");
    // Otherwise, let's power on the screen
  //  navigator.mozPower.screenEnabled = true;
  }
});



function update(stream) {
    document.querySelector('video').src = stream.url;
  }

  function hasGetUserMedia() {
    return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||
            navigator.mozGetUserMedia || navigator.msGetUserMedia);
  }

if (hasGetUserMedia()) {
  // Good to go!
} else {
  alert('getUserMedia() is not supported in your browser');
}
if (Modernizr.getusermedia){
  var gUM = Modernizr.prefixed('getUserMedia', navigator);
 
}



	
</script>
